<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dunstons-Coder | Omega Ultra AI</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&family=Fira+Code:wght@400;500&display=swap');
:root { --bg:#050505; --panel:#0d0d0f; --accent:#10b981; --border:#1f1f23; --text:#f4f4f5; }
body { margin:0; height:100vh; overflow:hidden; background:var(--bg); color:var(--text); font-family:'Plus Jakarta Sans',sans-serif; }
.glass { background: rgba(13,13,15,0.8); backdrop-filter: blur(20px); border:1px solid var(--border); }
.monaco-editor { padding-top:10px; background:transparent !important; }
.tab-active { color: var(--accent); border-bottom:2px solid var(--accent); background: rgba(16,185,129,0.05); }
::-webkit-scrollbar { width:5px; height:5px; }
::-webkit-scrollbar-thumb { background:#27272a; border-radius:10px; }
pre { white-space:pre-wrap; word-wrap:break-word; font-family:'Fira Code',monospace; }
.err-text { color:#ef4444; font-weight:bold; }
</style>
</head>
<body class="flex flex-col">

<header class="h-16 border-b border-[#1f1f23] flex items-center justify-between px-6 bg-black/50 z-50">
<div class="flex items-center gap-8">
    <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-emerald-400 to-green-700 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/20">
            <i class="fa-solid fa-atom text-black text-xl"></i>
        </div>
        <div>
            <h1 class="font-extrabold text-sm tracking-widest uppercase italic leading-none">Dunstons-<span class="text-emerald-500">Coder</span></h1>
            <span class="text-[9px] text-gray-500 font-bold tracking-[0.3em]">OMEGA ULTRA AI</span>
        </div>
    </div>
    <div class="flex items-center gap-1 bg-[#121214] rounded-full p-1 border border-[#1f1f23]">
        <button onclick="openModal('ai')" class="px-4 py-1.5 text-[10px] font-black uppercase hover:text-emerald-400 transition"><i class="fa-solid fa-robot mr-1"></i> Omega AI</button>
        <button onclick="openModal('founder')" class="px-4 py-1.5 text-[10px] font-black uppercase text-emerald-500 bg-emerald-500/10 rounded-full">Founder</button>
    </div>
</div>
<div class="flex items-center gap-6">
    <div class="flex flex-col items-end">
        <div class="text-[9px] font-bold text-gray-500 uppercase">Rank: Level <span id="user-level" class="text-emerald-500">1</span></div>
        <div class="w-32 h-1 bg-[#1f1f23] rounded-full mt-1 overflow-hidden">
            <div id="xp-bar" class="h-full bg-emerald-500 w-0 transition-all duration-500"></div>
        </div>
    </div>
    <button onclick="exportProject()" class="w-10 h-10 flex items-center justify-center rounded-full bg-[#121214] border border-[#1f1f23] hover:border-emerald-500 text-gray-400 hover:text-white transition">
        <i class="fa-solid fa-download"></i>
    </button>
</div>
</header>

<div class="flex flex-1 overflow-hidden">
<aside class="w-64 bg-black border-r border-[#1f1f23] flex flex-col p-4 gap-6">
<button onclick="createNewFile()" class="w-full bg-emerald-500 hover:bg-emerald-400 text-black py-3 rounded-xl font-extrabold text-xs uppercase transition-all shadow-lg shadow-emerald-500/20">
    + New File
</button>
<div class="flex-1 flex flex-col gap-2">
    <h3 class="text-[10px] font-black text-gray-600 uppercase tracking-widest px-2">Project Explorer</h3>
    <div id="file-tree" class="space-y-1 overflow-y-auto max-h-[50vh]"></div>
</div>
<div class="bg-[#0d0d0f] rounded-2xl border border-[#1f1f23] p-4">
    <label class="text-[9px] font-bold text-gray-500 uppercase block mb-2">Runtime</label>
    <select id="lang-select" onchange="updateLangManual()" class="w-full bg-black text-xs text-white p-3 rounded-lg border border-[#1f1f23] outline-none focus:border-emerald-500 transition">
        <option value="python">Python 3</option>
        <option value="cpp">C++</option>
        <option value="java">Java</option>
        <option value="javascript">Node.js</option>
        <option value="html">Web Live</option>
    </select>
    <button id="run-btn" onclick="runCode()" class="w-full mt-4 bg-white text-black py-3 rounded-lg font-black text-xs uppercase hover:bg-emerald-500 transition-all flex items-center justify-center gap-2">
        <i class="fa-solid fa-play"></i> Execute
    </button>
</div>
</aside>

<main class="flex-1 flex flex-col bg-[#050505]">
<div id="tabs-bar" class="flex bg-black border-b border-[#1f1f23] h-12 items-center px-4 gap-2 overflow-x-auto"></div>
<div id="editor-container" class="flex-1 relative"></div>
<div class="h-8 bg-[#0d0d0f] border-t border-[#1f1f23] flex items-center justify-between px-4 text-[10px] font-bold text-gray-500">
    <div class="flex gap-4">
        <span><i class="fa-solid fa-check-circle text-emerald-500"></i> Local-Sync: OK</span>
        <span id="char-count">0 chars</span>
    </div>
    <span>OMEGA ENGINE AI v1.0</span>
</div>
</main>

<div id="resizer" class="w-1 bg-[#1f1f23] hover:bg-emerald-500 cursor-col-resize transition-colors"></div>
<div id="output-panel" class="w-1/3 flex flex-col bg-black border-l border-[#1f1f23]">
<div class="h-12 border-b border-[#1f1f23] flex items-center justify-between px-6">
    <div class="flex gap-6 h-full">
        <button onclick="switchOut('term')" id="tab-term" class="text-[10px] font-black text-emerald-500 border-b-2 border-emerald-500 h-full uppercase">Console</button>
        <button onclick="switchOut('web')" id="tab-web" class="text-[10px] font-black text-gray-500 h-full uppercase">Live View</button>
    </div>
    <button onclick="clearConsole()" class="text-[10px] font-bold text-gray-600 hover:text-white uppercase">Clear</button>
</div>
<div id="console-view" class="flex-1 p-6 overflow-y-auto font-mono text-sm bg-black">
    <div id="terminal-output" class="text-gray-400"></div>
</div>
<div id="preview-view" class="flex-1 hidden bg-white">
    <iframe id="web-frame" class="w-full h-full" sandbox="allow-scripts allow-same-origin"></iframe>
</div>
</div>
</div>

<div id="modal-overlay" class="fixed inset-0 bg-black/95 backdrop-blur-xl z-[100] hidden flex items-center justify-center p-6" onclick="closeModals()">
<div id="modal-ai" class="bg-[#0d0d0f] w-full max-w-lg rounded-3xl border border-[#1f1f23] p-8 hidden" onclick="event.stopPropagation()">
<h2 class="text-xl font-black text-emerald-500 mb-4 uppercase">Omega-Brain AI</h2>
<div id="ai-chat" class="h-48 overflow-y-auto mb-4 bg-black border border-zinc-800 rounded-xl p-4 text-xs font-medium space-y-2">
    <div class="text-zinc-500 italic">Ask Omega AI to analyze, fix, or generate code.</div>
</div>
<div class="flex gap-2">
    <input type="text" id="ai-input" placeholder="Analyze this file or suggest code..." class="flex-1 bg-black border border-zinc-800 p-3 rounded-xl text-sm outline-none focus:border-emerald-500">
    <button onclick="askOmegaAI()" class="bg-emerald-500 text-black px-6 rounded-xl font-black text-xs uppercase">Process</button>
</div>
</div>

<div id="modal-founder" class="bg-[#0d0d0f] w-full max-w-xl rounded-[2rem] border border-[#1f1f23] p-12 text-center relative hidden" onclick="event.stopPropagation()">
<div class="w-28 h-28 bg-gradient-to-br from-emerald-400 to-green-600 rounded-3xl mx-auto flex items-center justify-center mb-8 rotate-12 shadow-2xl shadow-emerald-500/20">
<i class="fa-solid fa-crown text-black text-5xl"></i>
</div>
<h2 class="text-4xl font-black text-white mb-2 uppercase italic tracking-tighter">DUNSTON JUDE BANDASA</h2>
<p class="text-emerald-500 font-extrabold mb-8 tracking-[0.2em] text-xs uppercase">Founder | Visionary</p>
<p class="text-gray-400 leading-relaxed mb-10 italic">"Empowering the next generation of developers with tools that work for them."</p>
<button onclick="closeModals()" class="bg-white text-black text-[10px] font-black px-10 py-4 rounded-xl uppercase hover:bg-emerald-500 transition">Return to IDE</button>
</div>
</div>

<script>
let editor, activeId, saveTimeout, xp=parseInt(localStorage.getItem('dc_xp'))||0;
let data=JSON.parse(localStorage.getItem('dc_omega_u'))||{files:[{id:'1',name:'main.py',lang:'python',content:'print("Omega Ultra AI Online.")'}]};
const LANG_EXTS={py:'python',cpp:'cpp',java:'java',js:'javascript',html:'html'};

window.onload=()=>{ require.config({paths:{'vs':'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs'}}); require(['vs/editor/editor.main'],()=>{ initEditor(); initResizer(); initShortcuts(); updateXP(0); }); };

function initEditor(){ const f=data.files[0]; activeId=f.id; editor=monaco.editor.create(document.getElementById('editor-container'),{value:f.content,language:f.lang,theme:'vs-dark',automaticLayout:true,fontSize:15,fontFamily:'Fira Code',minimap:{enabled:false},padding:{top:20}});
editor.onDidChangeModelContent(()=>{ clearTimeout(saveTimeout); saveTimeout=setTimeout(save,500); document.getElementById('char-count').innerText=`${editor.getValue().length} chars`; });
renderUI();
}

function save(){ const f=data.files.find(x=>x.id===activeId); if(f){f.content=editor.getValue(); localStorage.setItem('dc_omega_u',JSON.stringify(data));} }

async function runCode(){ const f=data.files.find(x=>x.id===activeId); const term=document.getElementById('terminal-output'); if(f.lang==='html'){ switchOut('web'); document.getElementById('web-frame').srcdoc=f.content; return; }
switchOut('term'); term.innerHTML+=`<div class="text-emerald-500 font-bold mb-1">>>> Executing ${f.name}...</div>`; try{ const res=await fetch('https://emkc.org/api/v2/piston/execute',{method:'POST',body:JSON.stringify({language:f.lang,version:"*",files:[{content:f.content}]})}); const resData=await res.json(); if(resData.run){ if(resData.run.stdout) term.innerHTML+=`<pre class="text-gray-300">${resData.run.stdout}</pre>`; if(resData.run.stderr) term.innerHTML+=`<pre class="err-text">${resData.run.stderr}</pre>`; updateXP(25); } }catch(e){ term.innerHTML+=`<div class="err-text">Execution Error</div>`;} term.parentElement.scrollTop=term.parentElement.scrollHeight; }

async function askOmegaAI(){
    const input=document.getElementById('ai-input').value;
    if(!input) return;
    const chat=document.getElementById('ai-chat');
    chat.innerHTML+=`<div class="text-white">You: ${input}</div>`;
    document.getElementById('ai-input').value='';
    const code=editor.getValue();
    chat.innerHTML+=`<div class="text-emerald-500 italic">Omega: Loading...</div>`;
    chat.scrollTop=chat.scrollHeight;

    // Call OpenAI ChatGPT API (replace YOUR_API_KEY with your key)
    const res=await fetch('https://api.openai.com/v1/chat/completions',{
        method:'POST',
        headers:{'Content-Type':'application/json','Authorization':'Bearer YOUR_API_KEY'},
        body:JSON.stringify({model:'gpt-4',messages:[{role:'user',content:`Code: ${code}\nTask: ${input}`}]})
    });
    const data=await res.json();
    const msg=data.choices?.[0]?.message?.content||'No response';
    chat.innerHTML=chat.innerHTML.replace('Omega: Loading...','Omega: '+msg);
    chat.scrollTop=chat.scrollHeight;
}

function renderUI(){ const tree=document.getElementById('file-tree'); const tabs=document.getElementById('tabs-bar'); tree.innerHTML=''; tabs.innerHTML=''; data.files.forEach(f=>{ const active=f.id===activeId;
tree.innerHTML+=`<div onclick="switchFile('${f.id}')" class="p-3 rounded-xl text-[11px] cursor-pointer flex justify-between group transition-all ${active?'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 shadow-lg':'text-gray-500 hover:bg-white/5'}"><span class="font-bold"><i class="fa-solid fa-file-code mr-3 opacity-50"></i>${f.name}</span></div>`;
tabs.innerHTML+=`<div onclick="switchFile('${f.id}')" class="px-6 py-2 text-[10px] font-black cursor-pointer uppercase transition-all ${active?'tab-active':'text-gray-600 hover:text-gray-300'}">${f.name}</div>`; });
document.getElementById('lang-select').value=data.files.find(x=>x.id===activeId).lang;
}

function switchFile(id){ save(); activeId=id; const f=data.files.find(x=>x.id===id); editor.setValue(f.content); monaco.editor.setModelLanguage(editor.getModel(),f.lang); renderUI(); }

function createNewFile(){ const n=prompt("Filename:","logic.py"); if(!n) return; const ext=n.split('.').pop().toLowerCase(); const id=Date.now().toString(); data.files.push({id,name:n,lang:LANG_EXTS[ext]||'plaintext',content:''}); switchFile(id); }

function switchOut(t){ document.getElementById('console-view').classList.toggle('hidden',t!=='term'); document.getElementById('preview-view').classList.toggle('hidden',t!=='web'); document.getElementById('tab-term').className=t==='term'?"text-[10px] font-black text-emerald-500 border-b-2 border-emerald-500 h-full uppercase":"text-[10px] font-black text-gray-500 h-full uppercase"; document.getElementById('tab-web').className=t==='web'?"text-[10px] font-black text-emerald-500 border-b-2 border-emerald-500 h-full uppercase":"text-[10px] font-black text-gray-500 h-full uppercase"; }

function updateXP(val){ xp+=val; localStorage.setItem('dc_xp',xp); document.getElementById('user-level').innerText=Math.floor(xp/100)+1; document.getElementById('xp-bar').style.width=(xp%100)+'%'; }

function initShortcuts(){ window.addEventListener('keydown',e=>{ if(e.ctrlKey&&e.key==='s'){ e.preventDefault(); save(); } if(e.ctrlKey&&e.key==='Enter'){ e.preventDefault(); runCode(); } }); }

function initResizer(){ const resizer=document.getElementById('resizer'); const output=document.getElementById('output-panel'); resizer.addEventListener('mousedown',e=>{ const move=md=>{ const w=window.innerWidth-md.clientX; if(w>200&&w<900) output.style.width=w+'px'; }; document.addEventListener('mousemove',move); document.addEventListener('mouseup',()=>document.removeEventListener('mousemove',move)); }); }

function openModal(id){ document.getElementById('modal-overlay').classList.remove('hidden'); document.getElementById(`modal-${id}`).classList.remove('hidden'); }
function closeModals(){ document.getElementById('modal-overlay').classList.add('hidden'); document.querySelectorAll('[id^="modal-"]').forEach(m=>m.classList.add('hidden')); }
function clearConsole(){ document.getElementById('terminal-output').innerHTML=''; }
function exportProject(){ const blob=new Blob([JSON.stringify(data)],{type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='omega_ultra_project.json'; a.click(); }
function updateLangManual(){ const f=data.files.find(x=>x.id===activeId); f.lang=document.getElementById('lang-select').value; monaco.editor.setModelLanguage(editor.getModel(),f.lang); }
</script>
</body>
</html>
