<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Dunstons-Coder | Global Elite IDE</title>
<link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/editor/editor.main.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{ --bg:#0b0f14; --panel:#0d1117; --accent:#00ff41; --border:#2b3238; --text:#c9d1d9; --vs-bg:#1e1e1e; --danger:#ff4d4d; }
*{box-sizing:border-box; outline:none; transition: 0.15s ease-out;}
body,html{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:'Inter', system-ui, sans-serif;overflow:hidden;display:flex;flex-direction:column}

/* Maintenance System */
#lockScreen{display:none; position:fixed; inset:0; background:#000; z-index:99999; place-items:center; text-align:center}
.lock-box{background:var(--panel); padding:50px; border:1px solid var(--border); border-radius:24px; width:400px; box-shadow:0 0 50px rgba(0,255,65,0.1)}

/* Header & Controls */
.header{height:60px;background:var(--panel);display:flex;align-items:center;justify-content:space-between;padding:0 25px;border-bottom:1px solid var(--border);z-index:100}
.logo{color:var(--accent);font-weight:900;font-size:20px;letter-spacing:1.5px;text-transform:uppercase}
.btn{background:#1f2937;color:var(--text);border:1px solid var(--border);padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;font-size:12px;display:flex;align-items:center;gap:8px}
.btn:hover{border-color:var(--accent);background:#2d3748;transform:translateY(-1px)}

/* Workspace */
.app-body{flex:1;display:flex;min-height:0;position:relative}
.editor-container{width:50%; display:flex; flex-direction:column; background:var(--vs-bg); position:relative; overflow:hidden}
.resizer-bar{width:6px; background:#111; cursor:col-resize; z-index:10}
.resizer-bar:hover{background:var(--accent)}

.preview-container{flex:1; background:#fff; display:flex; flex-direction:column; position:relative}
.preview-container.fullscreen-mode { position:fixed; inset:0; z-index:10000; }
iframe{flex:1; width:100%; border:none; background:#fff}

/* Output Engine */
#langOutput{display:none; flex:1; background:#000; color:#00ff41; padding:25px; font-family:'Fira Code', monospace; overflow-y:auto; white-space:pre-wrap; font-size:14px; line-height:1.6}
.status-bar{height:30px; background:#161b22; color:var(--accent); font-size:11px; font-weight:bold; padding:0 20px; display:flex; align-items:center; justify-content:space-between; border-top:1px solid var(--border)}

/* Mission Modal */
.modal{display:none; position:fixed; inset:0; background:rgba(0,0,0,0.96); z-index:50000; place-items:center; backdrop-filter:blur(15px)}
.modal-content{background:var(--panel); padding:45px; border:1px solid var(--border); width:550px; border-radius:24px; text-align:center}
.mission-box{text-align:left; background:rgba(0,0,0,0.25); padding:25px; border-radius:15px; border-left:4px solid var(--accent); margin:25px 0}

select{background:#1f2937; color:var(--accent); border:1px solid var(--border); padding:8px; border-radius:6px; font-weight:bold; cursor:pointer}
</style>
</head>
<body>

<div id="lockScreen">
    <div class="lock-box">
        <div class="logo">DUNSTONS-CODER</div>
        <p style="margin-top:20px; opacity:0.6">MODE: MAINTENANCE</p>
        <input type="password" id="passInput" style="width:100%; padding:15px; background:#000; border:1px solid var(--border); color:var(--accent); margin:20px 0; border-radius:8px; text-align:center; font-size:18px" placeholder="Pin Required">
        <button class="btn" style="width:100%; justify-content:center; background:var(--accent); color:#000" onclick="checkLock()">UNLOCK SITE</button>
    </div>
</div>

<header class="header">
    <div style="display:flex;align-items:center;gap:20px">
        <div class="logo">DUNSTONS-CODER</div>
        <select id="langSelect" onchange="changeLang()">
            <option value="html">WEB (HTML/CSS/JS)</option>
            <option value="python">PYTHON 3</option>
            <option value="javascript">NODE.JS</option>
            <option value="cpp">C++ (GCC)</option>
            <option value="java">JAVA</option>
            <option value="rust">RUST</option>
        </select>
    </div>
    <div style="display:flex; gap:12px; align-items:center">
        <label style="font-size:11px; color:var(--accent); font-weight:800; cursor:pointer"><input type="checkbox" id="autoRun" checked> AUTO-RUN</label>
        <button class="btn" onclick="openAbout()"><i class="fa-solid fa-flag"></i> Our Mission</button>
        <button class="btn" onclick="toggleFullScreen()"><i class="fa-solid fa-expand"></i> Full Screen</button>
        <button class="btn" style="background:var(--accent); color:#000" onclick="runCode()">RUN ▶</button>
    </div>
</header>

<div class="app-body">
    <section class="editor-container" id="editorSection">
        <div id="monaco-container" style="flex:1"></div>
        <div class="status-bar">
            <span id="statusBar">● SYSTEM READY</span>
            <span style="opacity:0.5; font-size:10px">v3.0.0 Global Build</span>
        </div>
    </section>

    <div class="resizer-bar" id="resizer"></div>

    <section class="preview-container" id="previewPane">
        <iframe id="outputFrame"></iframe>
        <div id="langOutput"></div>
    </section>
</div>

<div class="modal" id="aboutModal">
    <div class="modal-content">
        <h1 style="margin:0; font-size:28px">Dunston Jude Bandasa</h1>
        <div class="mission-box">
            <p style="margin-top:0"><strong style="color:var(--accent)">Our Mission:</strong> Dunston created this site to provide everyone in the world a chance to learn and do coding for free with no limits.</p>
            <p style="margin-bottom:0"><strong style="color:var(--accent)">Support:</strong> Dedicated to empowering <strong>Sabah students</strong> to become global tech leaders from their own homes.</p>
        </div>
        <button class="btn" style="width:100%; justify-content:center; background:var(--accent); color:#000; padding:15px; font-weight:800" onclick="closeAbout()">RESUME BUILDING</button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
<script>
// --- CONFIGURATION ---
const IS_MAINTENANCE = false; // Toggle true/false
const OWNER_PASS = "2026"; 

let editor;
let runTimer;

// --- INITIALIZATION ---
require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs' }});
require(['vs/editor/editor.main'], function() {
    editor = monaco.editor.create(document.getElementById('monaco-container'), {
        value: "<h1>Welcome to the World's Best Free IDE</h1>",
        language: 'html',
        theme: 'vs-dark',
        automaticLayout: true,
        fontSize: 15,
        fontFamily: "'Fira Code', monospace",
        minimap: { enabled: false },
        cursorSmoothCaretAnimation: "on"
    });

    // Auto-Run Listener
    editor.onDidChangeModelContent(() => {
        if(document.getElementById('autoRun').checked) {
            clearTimeout(runTimer);
            runTimer = setTimeout(runCode, 1200);
        }
    });

    if(IS_MAINTENANCE) document.getElementById('lockScreen').style.display = 'grid';
});

// --- EXECUTION CORE ---
async function runCode() {
    const code = editor.getValue();
    const frame = document.getElementById('outputFrame');
    const langDiv = document.getElementById('langOutput');
    const lang = document.getElementById('langSelect').value;
    const status = document.getElementById('statusBar');

    status.innerText = "● EXECUTING...";
    status.style.color = "#ffdf4d";

    if (lang === 'html') {
        langDiv.style.display = 'none';
        frame.style.display = 'block';
        frame.srcdoc = code;
        status.innerText = "● RENDER SUCCESS";
        status.style.color = "var(--accent)";
    } else {
        frame.style.display = 'none';
        langDiv.style.display = 'block';
        try {
            const res = await fetch('https://emkc.org/api/v2/piston/execute', {
                method: 'POST',
                body: JSON.stringify({ language: lang, version: "*", files: [{ content: code }] })
            });
            const data = await res.json();
            langDiv.textContent = data.run.output || data.run.stderr || "> Process finished with no output.";
            status.innerText = data.run.stderr ? "● EXECUTION ERROR" : "● EXECUTION SUCCESS";
            status.style.color = data.run.stderr ? "var(--danger)" : "var(--accent)";
        } catch (e) {
            status.innerText = "● ENGINE OFFLINE";
            status.style.color = "var(--danger)";
        }
    }
}

// --- UTILITIES ---
function changeLang() {
    const l = document.getElementById('langSelect').value;
    monaco.editor.setModelLanguage(editor.getModel(), l);
    runCode();
}

function checkLock() {
    if(document.getElementById('passInput').value === OWNER_PASS) {
        document.getElementById('lockScreen').style.display = 'none';
    } else { alert("Access Denied."); }
}

function toggleFullScreen() { document.getElementById('previewPane').classList.toggle('fullscreen-mode'); }
window.addEventListener('keydown', (e) => {
    if (e.key === "Escape") document.getElementById('previewPane').classList.remove('fullscreen-mode');
});

// Resizer logic (Fixed for smoothness)
const resizer = document.getElementById('resizer');
const editorSection = document.getElementById('editorSection');
resizer.onmousedown = (e) => {
    document.onmousemove = (e) => {
        let p = (e.clientX / window.innerWidth) * 100;
        if(p > 10 && p < 90) editorSection.style.width = p + '%';
    };
    document.onmouseup = () => { document.onmousemove = null; editor.layout(); };
};

function openAbout() { document.getElementById('aboutModal').style.display = 'grid'; }
function closeAbout() { document.getElementById('aboutModal').style.display = 'none'; }
</script>
</body>
</html>
